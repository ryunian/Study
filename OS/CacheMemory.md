# 캐시메모리
> Cache Memory는 메인 메모리와 CPU간의 데이터 속도 향상을 위한 중간 버퍼 역할을 하는 CPU
내 또는 외에 존재하는 메모리이다. 전체 시스템의 성능의 개선을 시킬 수 있는 메모리이다.

* 캐시 메모리라고 하면 실제 메모리와 CPU 사이에서 빠르게 전달을 위해서 미리 데이터들을 저장해두는 좀더 빠른 메모리이다.

* 장점 : 데이터를 고속으로 엑세스 할 수 있다

* 단점 : 영구적 메모리 공간이 아니다. 즉, 언제든 지워질 수 있다.
> 

<br><br>

## 캐시의 지역성
- 시간 지역성 : 최근 참조된 주소의 내용은 곧 다음에 다시 참조되는 특성

- 공간 지역성 : 대부분의 실제 프로그램이 참조된 주소와 인접한 주소의 내용이 다시 참조되는 특성

<br><br>

## 캐시의 쓰기 정책
#### 1. Write Through 정책

프로세서에서 메모리에 쓰기 요청을 할 때마다 캐시의 내용과 메인 메모리의 내용을 같이 바꾸는 방식이다.
구조가 단순하다는 장점을 가지고 있지만 데이터에 대한 쓰기 요청을 할 때마다 항상 메인 메모리에 접근해야 하므로 캐시에 의한 접근 시간의 개선이 없어지게되며,  
따라서 쓰기 시의 접근 시간은 주 메모리의 접근 시간과 같게 되는 단점이 있다.

<br><br>

#### 2. Write Back 정책

CPU에서 메모리에 대한 쓰기 작업 요청 시 캐시에서만 쓰기 작업을 하고 그 변경 사실을 확인할 수 있는 표시를 하여 놓은 후  
캐시로부터 해당 블록의 내용이 제거될 때 그 블록을 메인 메모리에 복사함으로써 메인 메모리와 캐시의 내용을 동일하게 유지하는 방식

<br><br><br><br>

# 캐시메모리의 매핑 프로세스

### 1. Direct Mapping (직접 매핑)

> 메인 메모리를 일정한 크기의 블록으로 나누고 각각의 블록을 캐시의 정해진 위치에 매핑하는 방식
> 
- 가장 간단하며, 구현도 쉽다.
- 방식은 캐시의 주소 영역을 태그(Tag)와 인덱스(Index) 영역으로 나눈다.
- 필드 값을 가진 다수의 메모리 주소를 함께 저장할 수 없다는 단점이 있다.

<img src="https://github.com/ryunian/Study/blob/master/image/DirectMapping.png?raw=true" width="700px" height="500px">

<br><br><br>

### 2. Associative Mapping

> 메모리에 위치한 데이터의 주소(번지수)와 내용을 모두 저장하는 방식이다. 

즉, 메모리의 주소와 내용을 그대로 캐시에 저장하는 형태이다.
> 

- 프로세서에서 특정 주소에 접근할 경우와 캐시의 메모리 주소 영역에 찾고자 하는 번지수가 있을 경우 그 데이터 값을 그대로 전달받아 사용한다.
- 빠르고도 유연성이 높은 구조로 알려져 있다.
- 캐시에 저장되는 번지수와 데이터는 특별한 순서 없이 저장되므로, 찾고자 하는 데이터를 검색하는 데 추가 비용이 많이 든다는 단점이 있다.

<img src="https://github.com/ryunian/Study/blob/master/image/AssociativeMapping.png?raw=true" width="700px" height="500px">

<br><br><br>

### 3. Set Associative Mapping

> Associative Mapping과 Direct Mapping의 단점을 극복하기 위한 방식이다.

Direct Mapping의 최대 단점인 동일 인덱스 필드의 메모리 영역 데이터를 함께 공유할 수 없다는 단점을 극복하기 위해 마련된 것으로, 동일한 인덱스 필드를 여러 쌍 갖도록 한다. 
즉, 2way Set-Associative 방식은 2쌍의 태그와 데이터 필드를 하나의 인덱스 필드에 두며, 
일반적인 n way Set-Associative 방식은 n개의 태그와 데이터 필드를 인덱스 필드에 함께 두는 방식이다
> 

<img src="https://github.com/ryunian/Study/blob/master/image/SetAssociativeMapping.png?raw=true" width="700px" height="500px">